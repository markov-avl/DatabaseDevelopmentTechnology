\section{Анализ предметной области}\label{sec:domain-analysis}


\setlist[itemize, 1]{align=left, leftmargin=0cm, labelindent=1cm, listparindent=1cm, labelwidth=*, itemindent=2cm}


\subsection{Основные понятия}


Оператор сотовой связи -- это компания, предоставляющая услуги сотовой связи для сотовых телефонов своих клиентов. Клиент -- это лицо, заинтересованное в получении услуг данной компании. Между компанией и клиентом может быть заключен абонемент -- договор, по которому одна сторона, называемая абонентом, имеет право периодически требовать оказания определённых услуг от компании в течение срока действия договора абонемента (в данном случае только клиент может быть абонентом).

Сотовый оператор владеет множеством телефонных номеров вида \texttt{7\{К\}\{АН\}}, где \texttt{К} -- код города/оператора, состоящий из 3-х цифр, а \texttt{АН} -- абонентский номер, состоящий из 7-и цифр. % Добавлением таких телефонных номеров занимаются только администраторы данной системы.

Также сотовый оператор владеет множеством абонентских счетов. Абонентский счёт -- это номер расчётного счёта в банке, в котором сотовый оператор находится в партнерских отношениях. При подписании договора абонемента каждому абоненту сотового оператора присуждается некоторый абонентский счёт, который актуален до конца срока действия этого договора.

Сотовый оператор предоставляет услуги своим клиентам в виде тарифов. Тариф -- это включаемые услуги и ставки оплаты за эти же услуги, предоставляемые компанией. Тариф характеризуется следующими данными:
\begin{itemize}
    \item уникальное название;
    \item абонентская плата (руб.);
    \item интернет трафик (ГБ);
    \item количество минут (мин.);
    \item количество SMS (шт.).
\end{itemize}

Каждый тариф предполагает использование услуг, включаемых в этот тариф, и ежемесячную их оплату, равную соответствующей абонентской плате. Просматривать информацию об актуальных тарифах может любой пользователь, даже не авторизованный в системе, но добавлять новые тарифы и изменять информацию об уже существующих могут только менеджеры сотового оператора. На таблице \ref{table:actual-tariffs} представлены некоторые актуальные тарифы:

\renewcommand{\arraystretch}{1.5}
\begin{xltabular}[h]{\textwidth}{|C|H|C|C|C|}
    \caption{Актуальные тарифы\label{table:actual-tariffs}} \\
    \hline
    \textbf{Название} & \textbf{Абонентская плата (руб.)} & \textbf{Интернет трафик (ГБ)} & \textbf{Количество минут (мин.)} & \textbf{Количество SMS (шт.)} \\
    \hline \endhead
    Стандартный       & 150                               & 0,1                           & 50                               & 50                     \\
    \hline
    Супер SMART       & 600                               & 15                            & 600                              & 600                    \\
    \hline
    Всегда в сети     & 550                               & $\infty$*                     & 50                               & 50                     \\
    \hline
    Мой бизнес        & 1000                              & 35                            & $\infty$*                        & $\infty$*              \\
    \hline
\end{xltabular}
% большой отступ между таблицей и выноской
\begin{description}
    \footnotesize
    \item \textbf{*} Знак $\infty$ означает безлимит. В создаваемой системе $\infty$ эквивалентна числовому значению -1.
\end{description}

Оператор сотовой связи также обладает такими работниками как <<продавец-консультант>>, которые работают в салонах связи -- в торговых точках, предоставляющих комплексные услуги сотовой связи. Основной их работой является обслуживание клиентов.

Продавцы-консультанты занимаются продажей SIM-карт сотового оператора. SIM-карта -- это идентификационный электронный модуль мобильной связи сотового оператора для абонента, который и позволяет ему использовать услуги компании. Каждая SIM-карта сотового оператора уже привязана к единственному абонентскому счёту.

Клиент может обратиться к продавцу-консультанту одного из салонов за оказанием следующих услуг:
\begin{itemize}
    \item подписание договора абонемента;
    \item расторжение договора абонемента.
\end{itemize}


\subsection{Подписание договора абонемента}


Подписание договора абонемента проходит поэтапно. Первый этап -- этап проверки выполнения следующих условий со стороны клиента:
\begin{itemize}
    \item обладает паспортом совершеннолетнего;
    \item имеет менее 5-и зарегистрированных на своё имя абонентских счетов;
    \item (рассматривается, если уже хотя бы один абонентский счёт зарегистрирован на данного клиента) не имеет задолженности ни по одному из тарифов, зарегистрированных на каком-либо абонентском счёте данного клиента.
\end{itemize}

Если хотя бы одно условие проверки не выполняется, то клиент не может подписать договор. Если же все условия выполняются, то осуществляется переход на следующий этап -- выбор телефонного номера клиентом. Продавец-консультант предоставляет список свободных телефонных номеров -- номера, на которые в данный момент никто не зарегистрирован. Клиент выбирает наиболее понравившийся телефонный номер, и теперь может перейти к следующему этапу -- само подписание договора абонемента. Перед заполнением бланка продавец-консультант предоставляет одну из SIM-карт сотового оператора клиенту, к которой привязан абонентский счёт будущего абонента.

В договоре заполняются следующие поля:
\begin{itemize}
    \item телефонный номер, выбранный клиентом;
    \item ФИО клиента;
    \item серия и номер паспорта клиента;
    \item дата рождения клиента вида \texttt{\{ДД\}.\{ММ\}.\{ГГГГ\}};
    \item место прописки клиента;
    \item абонентский счёт, состоящий из 20 цифр (заполняется продавцом-консультантом).
\end{itemize}

После успешного заключения договора клиент становится абонентом данного оператора сотовой связи. Если абонент впервые заключает договор с данным оператором сотовой связи, то продавец-консультант вносит в систему следующие данные об клиенте: ФИО, серия и номер паспорта, дата рождения клиента, место прописки. Если же клиент уже заключал договор с данным сотовым оператором и некоторые из его данных изменились -- продавец-консультант изменяет эти данные в системе на актуальные (причем проверяя, не изменились ли серия и номер паспорта клиента).

Только после всех этих этапов продавец-консультант регистрирует полученный клиентом абонентский счёт на выбранный клиентом телефонный номер. Абонент характеризуется следующими данными:
\begin{itemize}
    \item абонентский счёт (полученный во время подписания договора абонемента);
    \item баланс на абонентском счёте;
    \item подключённый тариф;
    \item серия и номер паспорта абонента;
    \item ФИО абонента;
    \item дата рождения абонента;
    \item место прописки абонента.
\end{itemize}

После подписания договора в системе создается пользователь для абонента, логином которого является телефонный номер, выбранный пользователем, а паролем -- его абонентский счёт.

Также после подписания договора абонент получает возможность подключать себе тариф, выбрав наиболее понравившийся. Подключение тарифа -- это регистрация актуального тарифа сотового оператора и абонентского счёта абонента. Выполнение лишь одного условия позволяет произвести подключение тарифа успешно: на абонентском счёте должно быть больше или столько же денежных средств по сравнению со стоимостью абонентской платы подключаемого тарифа.


\subsection{Расторжение договора абонемента}


Абонент имеет право прекратить договорные отношения между собой и компанией сотового оператора, для этого он может обратиться к продавцу-консультанту. Расторжение договора абонемента может производиться лишь при выполнении следующих условий со стороны абонента:
\begin{itemize}
    \item должен знать свой телефонный номер;
    \item должен предъявить любой документ, удостоверяющий его личность;
    \item не имеет задолженности по тарифу, зарегистрированному на абонентский счёт.
\end{itemize} 

Если все эти условия выполнены, абоненту даётся бланк заявления на расторжение договора, в котором он заполняет следующие поля:
\begin{itemize}
    \item своё ФИО;
    \item свои серию и номер паспорта;
    \item выданный абонентский счёт, привязанный к ещё действующему договору;
    \item выданный телефонный номер, привязанный к ещё действующему договору.
\end{itemize}

Заполненный бланк передаётся обратно к продавцу-консультанту, и если всё успешно заполнено, то продавец-консультант удаляет всю информацию об абоненте из системы, освобождая телефонный номер данного абонента и удаляя его пользователя.


\subsection{Пользователи и задачи}


Выделим пользователей и задачи, которые они решают:


\renewcommand{\arraystretch}{1.5}
\begin{xltabular}[h]{\textwidth}{|C|C|C|C|C|}
    \caption{Пользователей и задачи\label{table:user-tasks}} \\
    \hline
    \textbf{Задачи}                             & \textbf{Любой пользователь} & \textbf{Менеджер} & \textbf{Продавец-консультант} & \textbf{Абонент} \\
    \hline \endhead
    Просмотр актуальных тарифов                 & +                           & +                 & +                             & +                \\
    \hline
    Добавление нового тарифа в систему          & -                           & +                 & -                             & -                \\
    \hline
    Изменение тарифа в системе                  & -                           & +                 & -                             & -                \\
    \hline
    Регистрация нового клиента в системе        & -                           & -                 & +                             & -                \\
    \hline
    Обновление данных о клиенте в системе       & -                           & -                 & +                             & -                \\
    \hline
    Добавление абонента в систему               & -                           & -                 & +                             & -                \\
    \hline
    Удаление абонента из системы                & -                           & -                 & +                             & -                \\
    \hline
    Просмотр свободных телефонных номеров       & -                           & -                 & +                             & -                \\
    \hline
    Просмотр информации об абонентах            & -                           & -                 & +                             & только о себе    \\
    \hline
    Подключение тарифа на свой абонентский счёт & -                           & -                 & -                             & +                \\
    \hline
\end{xltabular}